# 观察者模式

+ 行为型设计模式
+ 创见性设计模式主要解决“对象的创建”问题，结构型设计模式主要解决“类或者对象的组合或组装”，行为型就是解决“类或对象之间交互”
+ 观察者模式会对应不同的代码实现方式，有同步阻塞的实现方式，也有异步非阻塞的实现方式，有进程内的实现方式，也有跨进程的实现方式
+ 也称为“发布订阅”模式

## 代码模板

+ [code](https://github.com/sandubuhan/summary_design_pattern/tree/main/code/src/main/java/com/design_pattern/demo/ObserverPattern/one)

## 投资理财系统模板

+ 假如代码实现原本是

~~~java

public class UserController {
  private UserService userService; // 依赖注入
  private PromotionService promotionService; // 依赖注入

  public Long register(String telephone, String password) {
    //省略输入参数的校验代码
    //省略userService.register()异常的try-catch代码
    long userId = userService.register(telephone, password);
    promotionService.issueNewUserExperienceCash(userId);
    return userId;
  }
}
~~~

+ 接口此时不满足单一职责原则，如果需求变动了，不再发放体验金而是发放优惠券了，就需要大改，此时就可以使用观察者模式
+ [code](https://github.com/sandubuhan/summary_design_pattern/tree/main/code/src/main/java/com/design_pattern/demo/ObserverPattern/two)
+ 当我们需要添加新的观察者时，比如当用户注册成功后，将信息推送到大数据系统，UserController类中的register()函数就不用修改，只需要在增加一个相应的推送接口即可
+ 设计模式要干的事情就是解耦，创见性模式是将创建和使用代码解耦，结构型模式是将不同功能代码解耦，行为型模式是将不同的行为代码解耦，具体到观察者模式，是将观察者和被观察者代码解耦
+ 邮件订阅、RSS Feeds，本质上都是观察者模式。
